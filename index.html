<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Martín Lozano <martin.lozano@udem.edu>">

<title>Ensayos sobre finanzas.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="index_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<style>html{ scroll-behavior: smooth; }</style>






  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>

    #btn-back-to-top {

      position: fixed;

      bottom: 20px;

      right: 20px;

      width: 15px; /* Adjust the width */

      height: 15px; /* Adjust the height */

      box-sizing: content-box;

      z-index: 1000;

      background-color: rgba(0, 123, 255, 0.7);

      border: none;

      color: white;

      display: flex;

      align-items: center;

      justify-content: center;

    }

  </style>

</head>

<body>



<button type="button" class="btn btn-primary btn-lg bi bi-arrow-up" id="btn-back-to-top"></button>



<script>

  let backToTopButton = document.getElementById("btn-back-to-top");



  backToTopButton.addEventListener("click", function () {

    document.documentElement.scrollTop = 0;

  });

</script>







<div id="progress-bar" style="width: 0%; height:2px; background-color: rgb(89 127 235);; position: fixed; top: 0px; z-index: 2000;"></div>



<script id="progressbar" type="text/javascript">



document.addEventListener("DOMContentLoaded", function() {



    const bar = document.querySelector('#progress-bar');

    const post = document.querySelector('#quarto-content');

    const html = document.documentElement;

    

    const height = post.scrollHeight + post.offsetTop;

    

    window.addEventListener('scroll', () => {

        bar.style.width = (html.scrollTop / (height- html.clientHeight)) * 100 + '%';

    });

});

</script>


<link rel="stylesheet" href="styles.css">




<div id="quarto-content" class="page-columns page-rows-contents page-layout-full toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
  <li><a href="#dinero-e-ideas." id="toc-dinero-e-ideas." class="nav-link active" data-scroll-target="#dinero-e-ideas."><span class="header-section-number">1</span> Dinero e ideas.</a></li>
  <li><a href="#interés." id="toc-interés." class="nav-link" data-scroll-target="#interés."><span class="header-section-number">2</span> Interés.</a></li>
  <li><a href="#finanzas." id="toc-finanzas." class="nav-link" data-scroll-target="#finanzas."><span class="header-section-number">3</span> Finanzas.</a></li>
  <li><a href="#there-is-no-free-lunch." id="toc-there-is-no-free-lunch." class="nav-link" data-scroll-target="#there-is-no-free-lunch."><span class="header-section-number">4</span> There is no free lunch.</a></li>
  <li><a href="#equilibrios-i-deuda-o-capital-liquidez-o-rentabilidad" id="toc-equilibrios-i-deuda-o-capital-liquidez-o-rentabilidad" class="nav-link" data-scroll-target="#equilibrios-i-deuda-o-capital-liquidez-o-rentabilidad"><span class="header-section-number">5</span> Equilibrios I: ¿Deuda o capital? ¿Liquidez o rentabilidad?</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ensayos sobre finanzas.</h1>
<p class="subtitle lead">Conceptos básicos.</p>
</div>



<div class="quarto-title-meta column-page-right">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Martín Lozano <tt><code>&lt;martin.lozano@udem.edu&gt;</code></tt> </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">December 22, 2024, 20:59:36 pm.</p>
    </div>
  </div>
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    Los ensayos introductorios en finanzas son una herramienta para construir una comprensión sólida y estructurada del campo, especialmente para quienes inician sus estudios o buscan profundizar en él. Al presentar los conceptos esenciales y los principios que guían el análisis financiero, estos ensayos permiten que los lectores desarrollen un marco de referencia que facilita el aprendizaje de temas más avanzados. Además, ayudan a familiarizarse con el lenguaje técnico y los enfoques analíticos propios de las finanzas, lo que mejora la capacidad de interpretación y análisis en un entorno dinámico y multidisciplinario. Esta exposición inicial permite comprender las interrelaciones entre distintos conceptos y enfoques, preparando al lector para tomar decisiones informadas y abordar los desafíos que se presentan en estudios avanzados y en el ejercicio profesional del análisis financiero.
  </div>
</div>


</header>



<br>
<p align="right"> 
  <a href="https://mlozanoqf.github.io/">
    <span style="color: black">Back to Quantitative Finance with </span>
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@3.0.1/icons/r.svg" alt="R Icon" style="width: 30px; height: 30px;">
  </a>
</p>

<p align="right"> 
    <a href="https://github.com/mlozanoqf" target="blank"><img align="center" src="https://cdn.jsdelivr.net/npm/simple-icons@3.0.1/icons/github.svg" alt="martin-lozano-21818a22" height="20" width="30"></a>
    <a href="https://ssrn.com/author=1490785" target="blank"><img align="center" src="./ssrn.svg" height="90" width="30"></a>
    <a href="mailto:mlozanoqf@gmail.com" target="blank"><img align="center" src="./envelope-solid.svg" alt="mailto:mlozanoqf@gmail.com" height="20" width="30"></a>
    <a href="https://linkedin.com/in/martin-lozano-21818a22" target="blank"><img align="center" src="https://cdn.jsdelivr.net/npm/simple-icons@3.0.1/icons/linkedin.svg" alt="martin-lozano-21818a22" height="20" width="30"></a>
    <a href="https://www.youtube.com/user/drmartinlozano" target="blank"><img align="center" src="https://cdn.jsdelivr.net/npm/simple-icons@3.0.1/icons/youtube.svg" alt="https://www.youtube.com/channel/drmartinlozano" height="20" width="30"></a>
    <a href="https://scholar.google.com/citations?user=w8boOboAAAAJ&amp;hl=en" target="blank"><img align="center" src="./google-scholar.svg" height="30" width="25"></a>
    <a href="https://sites.google.com/site/mlozanoqf" target="blank"><img align="center" src="https://cdn.jsdelivr.net/npm/simple-icons@3.0.1/icons/icloud.svg" alt="https://www.youtube.com/channel/drmartinlozano" height="20" width="30"></a>
    <a href="https://us02web.zoom.us/j/9209945512" target="blank"><img align="center" src="https://cdn.jsdelivr.net/npm/simple-icons@3.0.1/icons/zoom.svg" alt="zoom" height="60" width="50"></a>
</p>

<hr style="border:2px solid gray">
<section id="dinero-e-ideas." class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Dinero e ideas.</h1>
<p><em>Autor: Dr.&nbsp;Martín Lozano.</em></p>
<p>Como en cualquier otra área de conocimiento, finanzas nos ayuda a comprender mejor el mundo complejo que nos rodea. Considere una simplificación radical en donde en este mundo cada uno de nosotros tiene dinero o ideas. El dinero representa los recursos materiales, y las ideas los recursos intelectuales. Tanto las ideas sin financiamiento, como el dinero por si mismos son improductivos. Pero las ideas con financiamiento tienen el potencial de generar más riqueza para los involucrados, y en el agregado crecimiento y desarrollo económico para la sociedad. Así, tenemos dos grupos de personas con intereses complementarios: las personas con dinero buscan oportunidades de inversión para incrementar su riqueza, y las personas con ideas buscan financiamiento para concretar sus proyectos.</p>
<p>En la práctica, las empresas compiten con otras para conseguir recursos. Esta batalla es injusta porque frecuentemente es el tamaño de la empresa y no el potencial de la idea lo que atrae al financiamiento. Así, las empresas pequeñas terminan perdiendo, y la brecha entre las grandes y pequeñas aumenta. Por otro lado, si las opciones de financiamiento son escasas, entonces tenemos financiamiento costoso que dificulta que los proyectos tengan utilidades, las cuales son necesarias para que las personas con dinero reciban su compensación en forma de rendimiento. Si el sistema financiero es deficiente, entonces las buenas ideas pueden quedarse sin financiamiento o con uno muy caro, mientras que los malos proyectos podrían recibirlo en condiciones favorables. Por éstas y otras razones, las decisiones de inversión y financiamiento son complejas.</p>
<p>Incluso si el financiamiento no fuera un problema, todavía queda la posibilidad de que la idea fracase. Esto puede suceder por muchas razones, pero un factor que aglutina a la mayoría es el tiempo. El tiempo debe pasar para que una idea financiada genere los resultados esperados. Y como el tiempo es una fuente de incertidumbre, mientras los proyectos sean de más largo plazo, habrá más posibilidad de que algo salga mal y la idea fracase. Con lo cual, las decisiones de financiamiento e inversión no solo son complejas sino inciertas.</p>
<p>Por otro lado, uno de los principales retos de las decisiones de inversión es discernir entre las oportunidades disponibles. Esto es complejo porque necesitamos saber hoy el futuro y eso es claramente imposible. La alternativa es usar proyecciones sobre el posible desempeño de proyectos inciertos, para los cuales en ocasiones tenemos información limitada, incompleta o equivocada. Si se superan estas dificultades, y las proyecciones se estiman bien, el futuro se vuelve menos incierto al revelar qué tan bien y qué tan mal pueden ir las cosas para nuestros proyectos de inversión. Como resultado, podríamos ordenar las alternativas de inversión de acuerdo a su nivel de riesgo y asignar un mayor rendimiento esperado a aquellas alternativas con mayor riesgo. Así, si se superan estas dificultades y el análisis está libre de errores de estimación, discernir entre las oportunidades de inversión disponibles sería un poco menos incierto y eso significa que las decisiones se vuelvan un poco menos complejas.</p>
<p>Independientemente de que las decisiones de financiamiento e inversión sean complejas e inciertas, éstas se toman todos los días: desde contratar un plan de telefonía hasta financiar una vacuna. Tomar malas decisiones implica incurrir en costos adicionales, pérdida de empleos, recesiones o pérdida de vidas. Eso significa que los responsables de tomar estas decisiones deben ser profesionales con conocimiento del sistema financiero, la industria vinculada al proyecto, gestión de riesgos, econometría, evaluación de proyectos, estadística aplicada, ciencia de datos y posiblemente más áreas afines a finanzas. Todos los intentos y esfuerzos para mejorar nuestro entendimiento de las decisiones financieras, contribuye a mejorar las posibilidades de tener resultados prósperos para la sociedad.</p>
<p>Sería autocomplaciente decir que los financieros nos hemos distinguido por tomar buenas decisiones de inversión y financiamiento. Las diferencias entre los niveles de desarrollo económico, la pobreza, la falsa prosperidad a costa del medio ambiente, la mortalidad elevada de las empresas pequeñas, son consecuencia de saldos pendientes que finanzas tiene con la sociedad. No solo se requiere conocimiento, también es necesario que las personas involucradas se conduzcan con ética y no sucumban a la tentación de la corrupción.</p>
<p>Al final, en nuestro intento por comprender mejor el mundo en el que vivimos bajo la óptica de finanzas, podemos concluir que necesitamos a más personas buenas que tomen decisiones financieras de acuerdo al análisis de datos y con un criterio sostenible. Las decisiones financieras las tomamos todos y las consecuencias tienen el potencial de mejorar o empeorar nuestro nivel de vida.</p>
</section>
<section id="interés." class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Interés.</h1>
<p><em>Autor: Dr.&nbsp;Martín Lozano.</em></p>
<p>El dinero, como cualquier otro bien escaso en la economía, tiene un valor. Se dice comúnmente que la tasa de interés es el precio del dinero, y como el dinero es lo que se requiere para comprar y vender bienes y servicios, la tasa de interés tiene el potencial de impactar a la actividad económica. De hecho, el dinero se puede comprar y vender gracias a que tiene precio. Por eso, cuando lo pido prestado, tengo que pagar un monto que se determina por la tasa de interés. O bien, cuando deposito mi dinero en el banco, recibo una cantidad equivalente a la tasa de interés. Entonces, la tasa de interés puede representar un costo o un ingreso monetario. En general, representa un costo cuando pido prestado, y es un ingreso cuando presto mi dinero. El tamaño del costo o ingreso monetario puede ser alto o bajo, eso depende de la tasa de interés.</p>
<p>No pedimos prestado dinero para contemplarlo sino para usarlo. Como pedir prestado implica un costo que tengo que pagar, entonces tengo que usarlo de manera inteligente para obtener un beneficio suficientemente alto y así estar en condiciones de pagarlo. Si el uso que le doy al dinero prestado resulta en una mala inversión, no voy a tener los recursos suficientes para pagar el préstamo y las consecuencias van desde una pérdida económica hasta recesiones económicas en un entorno más agregado. También debo ser cauteloso al prestarlo porque si cae en manos de personas irresponsables o que lo usan para financiar proyectos malos, es posible que no reciba mi pago correspondiente. El tamaño de estos incentivos para que el dinero se use de manera productiva y responsable depende de la tasa de interés.</p>
<p>En economía también nos interesa otro tipo de costo que resulta más abstracto, pero al mismo tiempo muy real. El costo de oportunidad nos ayuda a comprender cómo tomamos las decisiones en la vida, incluyendo las decisiones financieras. Consideremos una situación en la que tengo una cantidad de dinero y dos posibles usos: irme de vacaciones de verano, o dejarlo en mi cuenta bancaria para recibir un ingreso igual a la tasa de interés. Si después de evaluarlo decido ir de vacaciones, mi beneficio es mi diversión y mi costo de oportunidad es lo que hubiera recibido si lo hubiera dejado en el banco. Por otro lado, si decido mantenerlo en el banco, el beneficio es el ingreso que recibiré del banco y el costo de oportunidad es lo que me hubiera divertido en mis vacaciones. El costo de oportunidad representa lo que sacrifico al tomar una decisión. Eso significa que si la tasa de interés es muy baja, seguramente iré de vacaciones porque no pierdo mucho. Sin embargo, si la tasa de interés es muy alta, pensaré dos veces si vale la pena irme de vacaciones.</p>
<p>El nivel de la tasa de interés sube y baja a través del tiempo. Es verdad que puede tener periodos en donde se mantiene sin cambio, pero no es para siempre. Cuando la tasa de interés es alta, el costo de pedir prestado aumenta y el beneficio de dejarlo en el banco en forma de ahorro aumenta. Como consecuencia, las personas tendrán incentivos para reducir su nivel de consumo a crédito; y las empresas tendrán incentivos para reducir su nivel de inversión porque para ello se requiere pedir financiamiento o solicitar un crédito. Si las personas y empresas reducen sus niveles de consumo e inversión, entonces la actividad económica en general pierde dinamismo porque la demanda por bienes y servicios se reduce. Este resultado no parece muy atractivo porque en principio nadie desea que la actividad económica pierda dinamismo, pero aunque parezca paradójico en ocasiones esto es algo deseable. En particular, la reducción de la demanda agregada puede contribuir a reducir el precio de los bienes y servicios. Así, una tasa de interés alta tiene el potencial de combatir la inflación elevada mediante desincentivar el consumo y la inversión.</p>
<p>Cuando la tasa de interés es baja, la lógica es parecida pero en sentido inverso. Esto es, el costo de pedir prestado se reduce y el beneficio de dejarlo en el banco en forma de ahorro disminuye. Como consecuencia, las personas y las empresas tendrán incentivos adicionales para consumir usando crédito e invertir solicitando financiamiento o préstamos bancarios. El aumento de la demanda agregada puede contribuir a estimular la actividad económica y eso parece ser una medida eficaz para salir de una recesión. Sin embargo, las decisiones de consumo e inversión no solo dependen de la tasa de interés, o del costo de financiamiento. Para invertir, las personas no solo necesitan dinero barato, sino también es necesario un determinado nivel de certeza sobre buenas perspectivas económicas para que sus inversiones tengan más probabilidad de ser exitosas. Así, podemos tener periodos en donde la tasa de interés es baja y la actividad económica se mantiene lenta, y eso se puede explicar por malas expectativas sobre el futuro.</p>
<p>En un entorno internacional, cuando un país X sube su tasa de interés, aumentan los incentivos de los extranjeros por depositar su dinero y aprovechar ese ingreso. Si esto sucede, el país X experimenta un incremento en la oferta de divisas extranjeras y una demanda por moneda local. El resultado tiende a ser un fortalecimiento de la moneda local. Esto es, más oferta de divisas extranjeras implica que éstas se vuelvan menos escasas y por tanto más baratas en el país X. También lo podemos ver si pensamos en que la demanda por moneda local aumenta el precio de la moneda del país X. Una tasa de interés elevada puede explicar parte de la apreciación del tipo de cambio en el país X. Para completar este ejemplo, cuando un país X baja su tasa de interés, las divisas pueden salir y buscar otras alternativas de ahorro en otros países. Eso implica más escasez de divisas, lo cual significa divisas más caras, o una depreciación de la moneda local.</p>
<p>Hay muchas tasas de interés que conviven al mismo tiempo en la economía, pero en general tenemos una tasa de interés de referencia dictada por las autoridades monetarias del país. Una tasa de interés alta o baja no es buena o mala por si misma, su nivel debería cambiar en el tiempo para buscar mantener una estabilidad económica y financiera. Esta estabilidad es necesaria, aunque no suficiente para que las decisiones financieras puedan tener mejores perspectivas y generen crecimiento económico sostenible y bienestar para las familias. Como su nombre lo sugiere, comprender la tasa de interés resulta interesante.</p>
</section>
<section id="finanzas." class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Finanzas.</h1>
<p><em>Autor: Dr.&nbsp;Martín Lozano.</em></p>
<p>Es común que un financiero sostenga que aprender algo de finanzas es necesario y positivo para todos. Pero lo mismo puede decir un sociólogo, o un médico y posiblemente todos tengamos razón. Comprender algo de distintas áreas de conocimiento es positivo porque nos ayuda a tener una visión más holística sobre nuestra vida y nuestro papel en este mundo. Los beneficios en el caso de finanzas, al menos cuando las cosas salen bien, pueden llegar hasta mejorar nuestro nivel de vida y bienestar. El punto de partida es aceptar que el dinero es escaso, nuestras necesidades son abundantes, y en general no podemos satisfacerlas todas al mismo tiempo. Evidentemente, no es un punto de partida muy alejado de la realidad y la promesa de la prosperidad resulta muy atractiva.</p>
<p>El ser humano necesita de la espiritualidad y aspectos no materiales, pero también necesita pagar por bienes y servicios en su vida diaria. Como el dinero no es suficiente en la mayoría de los casos, parte de la solución que ofrece finanzas es incorporar no solo el ingreso presente sino el ingreso futuro. En particular, las personas no siempre tienen la cantidad de dinero necesaria para comprar una casa hoy, pero algunos podrán si contemplamos sus ingresos futuros. Con lo cual, el futuro juega un papel fundamental en finanzas. Tenemos instrumentos que nos permiten postergar el consumo, como el ahorro, y otros que permiten adelantarlo, como el crédito. En principio, el sistema financiero facilita que las personas que deciden postergar su consumo terminen financiando a las personas que quieren adelantarlo.</p>
<p>Parece obvio, pero finanzas funciona mejor cuando las personas tienen conocimiento básico de finanzas y acceso a los productos y servicios financieros independientemente de su nivel de ingreso. En el mundo podemos identificar casos de éxito en donde la innovación financiera contribuye a mejorar el bienestar de las personas, pero también hay casos en donde estos beneficios simplemente no llegan. La falta de competencia en el sector financiero y una regulación deficiente pueden ocasionar que las empresas financieras decidan orientar sus operaciones hacia sus clientes grandes y descuiden al resto. Por otro lado, la falta de conocimiento sobre aspectos básicos de finanzas personales también puede ocasionar que las personas se alejen involuntariamente del sistema financiero y sus potenciales beneficios. La combinación de estos factores es muy grave porque propicia que los que más saben y más tienen acumulen más recursos, y los que menos saben y menos tienen se queden igual o empeoren su situación.</p>
<p>Por eso, las iniciativas para enseñar y aprender finanzas, pueden tener un impacto muy positivo en la sociedad. Aprender a hacer registros personales de ingresos y gastos, llevar la contabilidad de una microempresa, o aprender la forma correcta de usar una tarjeta de crédito, son habilidades básicas y positivas en la vida de muchos. Impulsar las iniciativas para que tengamos una regulación que propicie más competencia en el sector financiero no es una condición suficiente para que se cumplan las promesas de prosperidad, pero al menos es una condición necesaria para que suceda.</p>
<p>Los servicios financieros muy necesarios para el funcionamiento de la sociedad y la economía. Tanto que cuando por diversas razones no están al alcance de todos, se abren oportunidades para que personas mal intencionadas lucren a costa de otros. Préstamos informales sencillos de obtener, pero con condiciones excesivamente abusivas para pagar, fraudes, o formas de cobro que incluyen amenazas y violencia son algunos ejemplos de los problemas derivados de las fallas de un buen sistema financiero y de justicia. Naturalmente estas consecuencias negativas se intensifican si además hay una falta de educación financiera en la sociedad.</p>
<p>En teoría, finanzas contribuye a resolver el problema del dinero escaso y las necesidades abundantes. Pero la realidad es que la brecha entre las personas de bajos y altos recursos se mantiene alta especialmente en los países en donde el sistema financiero está menos desarrollado y la educación es deficiente. Otro problema es que el equilibrio del sistema es vulnerable. Por ejemplo, una mala concepción del crédito puede dar la falsa impresión de que puedes aumentar tus ingresos o postergar los pagos de manera ilimitada. Esto resulta irresponsable porque en el peor de los casos habrá una declaratoria de bancarrota, y si no, terminarán pagando tus hijos, nietos, o en el caso del sector público los contribuyentes de administraciones futuras.</p>
<p>Pero finanzas no solo debería ofrecer beneficios a las personas porque no somos los únicos que habitamos el planeta. En realidad, los recursos naturales son prestados, no nos pertenecen, y debemos cuidarlos para que otras generaciones los usen y disfruten responsablemente. Considerar al rendimiento como el fin último de los proyectos de inversión, y pensar que la tierra, el agua y el aire nos pertenecen, han tenido consecuencias negativas irreversibles en la naturaleza. Ahora somos un poco más conscientes sobre el impacto de proyectos de inversión que destruyen áreas verdes o contaminan, pero seguramente no es suficiente con respecto al daño ambiental. Ahora también queda claro que la búsqueda del bien individual no propicia el bien colectivo de manera automática. Nuestros actos tienen consecuencias y vivir en sociedad implica que somos responsables de ellas, incluyendo aquellas que impactan negativamente al medio ambiente y al resto de los seres vivos que no tienen forma de defender sus derechos.</p>
</section>
<section id="there-is-no-free-lunch." class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> There is no free lunch.</h1>
<p><em>Autor: Dr.&nbsp;Martín Lozano.</em></p>
<p>En la vida, es fácil clasificar nuestros actos en buenos y malos. También sabemos casi con certeza que las buenas acciones tienen consecuencias positivas, y las malas acciones consecuencias negativas. En finanzas las cosas no son así porque una misma inversión puede ser buena o mala para dos personas, las buenas inversiones pueden salir mal, y las malas pueden salir bien. Pero no todo está perdido porque en finanzas tenemos forma de estimar el riesgo de las inversiones, y eso nos permite calcular su rendimiento esperado. Así, las inversiones muy riesgosas, aquellas que pueden ser muy buenas o muy malas, se revelan al inversionista casi de manera natural porque son las que ofrecen un mayor rendimiento esperado. De igual manera, aquellas inversiones de poco riesgo, las que son más fáciles de clasificar como buenas inversiones, se revelan porque tienen un rendimiento esperado bajo. De ahí la famosa frase de <em>a mayor riesgo mayor rendimiento</em>.</p>
<p>Una inversión de bajo o nulo riesgo es una apuesta segura. Considere una inversión hipotética en la que ganamos 5% cada año que la Tierra gire alrededor del Sol, y 0% si no lo hace. La evaluación es muy obvia, tendremos un rendimiento de 5% al final del año. Considere otro ejemplo más real que consiste en comprar una acción de Starbucks hoy y venderla en un mes. El rendimiento esperado es más complicado de estimar porque el precio de Starbucks es volátil, sube y baja todos los días, cada minuto. Esto significa que Starbucks nos puede hacer perder o ganar dinero. Una forma de abordar el problema de la incertidumbre es estimar el riesgo de la acción de Starbucks con datos. Posiblemente lo más sencillo es calcular el rendimiento histórico mensual de los últimos 12 meses. Si al hacerlo tenemos rendimientos históricos que van desde -2% hasta 18%, y el promedio es 9%, así podemos proponer que lo peor que puede suceder es que pierda 2%, en el mejor de los casos gane 18%, y que en promedio espero ganar 9%.</p>
<p>La buena noticia es que parte de la incertidumbre original de la inversión de Starbucks la hemos cuantificado y ahora la llamamos riesgo. El riesgo es esta parte de la incertidumbre que podemos medir y eso es bueno porque lo que medimos lo podemos controlar y nos permite tomar decisiones más informadas. Pero tenemos malas noticias. Posiblemente la peor es que no tenemos muy claro qué tanta incertidumbre nos queda sin ser medida, y la consecuencia es que en el peor de los casos podríamos estar subestimando el riesgo de Starbucks. Otra mala noticia es que cada persona puede usar una metodología distinta para medir el riesgo y sus resultados serían distintos, por ejemplo tomar 24 en lugar de 12 meses. Eso implica que Starbucks se parece al gato de Schrödinger porque puede ser una buena o mala inversión al mismo tiempo para dos personas.</p>
<p>Asumir que voy a ganar 9% es ingenuo porque éste es un promedio y no una promesa. Esperar el 18% es bastante optimista, y pensar que perderé 2% es muy pesimista porque la probabilidad de ambos rendimientos extremos es baja. Nadie debería tomar una decisión de inversión basado en el rendimiento esperado sino considerando su respectivo riesgo. El problema es que con frecuencia las inversiones se comparan de acuerdo a su rendimiento esperado, que en ocasiones parece rendimiento prometido, y la información sobre el riesgo es poco clara o inexistente. Podríamos pensar que el inversionista puede hacer sus propias estimaciones pero no todas las personas saben cómo hacerlo. También hay inversionistas que pueden exhibir un comportamiento irracional ignorando las estimaciones, e invirtiendo en base a sus sesgos, creencias, sentimientos y preferencias. La irracionalidad en los inversionistas existe y no significa que están locos, simplemente somos humanos y nuestra conducta es compleja.</p>
<p>Difícilmente podríamos clasificar a las inversiones en buenas y malas porque hasta la metodología más sofisticada y precisa es incapaz de explicar toda la incertidumbre de una inversión. Pero lo que sí podemos hacer es aprovechar lo que sabemos del tema y clasificar en base a datos e inteligencia. Hay personas que se distinguen por tomar buenas decisiones de inversión, ya sea por suerte, capacidad, habilidad, conocimiento, o experiencia. La suerte no se puede acumular o atraer si no somos supersticiosos. La experiencia sí se puede acumular pero se necesitan muchos años de trabajo constante en la industria y apertura para aprender de los errores. En cambio, estudiar es una buena manera de acumular capacidad, habilidad y conocimiento.</p>
<p>En finanzas hemos investigado sobre estos temas por muchos años. Cada vez sabemos un poco más pero surgen más preguntas, la industria financiera se vuelve más compleja, y los retos más críticos. Hay áreas en las que nos interesa saber cuáles son los factores que explican el rendimiento futuro de las inversiones. Otras en las que nos interesa combinar varias inversiones para diversificar el riesgo. Otros investigadores desarrollan técnicas econométricas para reducir el error de nuestras estimaciones. Hay áreas en las que nos interesa entender cómo la conducta humana está relacionada con las decisiones de inversión. Otros investigadores aplican ciencia de datos para tratar de comprender mejor todas las áreas anteriores.</p>
<p>El riesgo y el rendimiento no están en conflicto. En realidad son parte del mismo fenómeno, y aunque no son directamente observables, tienen y tendrán una influencia muy clara sobre las decisiones financieras en el mundo. No hay inversiones seguras, y si las hay tendrán un rendimiento esperado muy bajo. Tampoco hay inversiones con rendimientos exageradamente altos, y si las hay tendrán un riesgo muy elevado. Como dice otra frase famosa: <em>there is no free lunch</em>.</p>
</section>
<section id="equilibrios-i-deuda-o-capital-liquidez-o-rentabilidad" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Equilibrios I: ¿Deuda o capital? ¿Liquidez o rentabilidad?</h1>
<p><em>Autor: Dr.&nbsp;Martín Lozano.</em></p>
<p>Una de las decisiones que toman las empresas con cierta libertad es su forma de financiamiento. Aunque hay una gran cantidad de alternativas, todas se pueden clasificar en dos grupos: capital o deuda. Una vez que la empresa obtiene el financiamiento ya sea por deuda o capital, se enfrenta a otra decisión sobre cómo usarlo, que es el dilema entre liquidez o rentabilidad.</p>
<p>Financiarse exclusivamente con deuda resulta problemático por varias razones. Si la empresa no genera los suficientes ingresos o flujos de efectivo para cumplir con sus obligaciones crediticias, la empresa puede quebrar porque los bancos y tenedores de deuda esperan su pago y no son pacientes como lo podrían ser los dueños o accionistas. Además, la empresa podría tener dificultades para obtener más financiamiento en el futuro por su gran carga de deuda, lo que dificultaría financiar sus proyectos futuros. Los prestamistas perciben este mayor riesgo crediticio y pueden exigir tasas de interés más altas, las calificadoras también pueden degradar la calificación crediticia e incrementar el costo de financiamiento de la empresa. Todo esto limita el margen de maniobra de la empresa, incluso puede limitar sus posibilidades de crecimiento porque el pago de la deuda se convierte en una prioridad en comparación con la inversión en nuevos proyectos.</p>
<p>Como es de esperarse, financiarse exclusivamente con capital también tiene una serie de desventajas. La emisión de más acciones para financiarse implica una cesión de parte de la propiedad porque diluye la participación de los accionistas existentes, y posiblemente más importante, puede reducir el control y poder de decisión dentro de la empresa. Este problema se puede acentuar cuando la empresa necesite más financiamiento y requiera emitir más acciones. Los accionistas pueden poner presión sobre la administración en caso de que exijan rendimientos a corto plazo o pago de dividendos. Esto podría llevar a la administración a tomar decisiones de inversiones de corto plazo a costa de otras inversiones estratégicas que requieran un periodo de maduración de más largo plazo, o podría presionar a la administración a dejar de reinvertir ganancias, lo cual puede ser importante para su crecimiento. En general, las acciones tienen más riesgo que los bonos, y eso significa que los inversionistas esperan rendimientos más altos y como resultado puede aumentar el costo promedio ponderado de capital. Este tipo de financiamiento implica además pérdidas de ventajas fiscales. En particular, los dividendos pagados a los accionista no son deducibles de impuestos, mientras que los pagos de intereses de la deuda sí lo son.</p>
<p>Si bien ambas posibilidades extremas son una opción válida de financiamiento para la empresa, ninguna parece ser sostenible en el tiempo. Ambas pueden representar un mayor costo de capital que en términos prácticos limita la posibilidad de que sus proyectos de inversión tengan un valor presente neto positivo, o simplemente que los costos elevados le dificulten convertir sus ingresos en utilidades. Esto justifica los esfuerzos para que la administración minimice su costo de capital, y así encontrar el equilibrio entre deuda y capital propio, en donde el beneficio fiscal de la deuda se compense con el aumento de riesgo que implica.</p>
<p>Una vez que la empresa tiene sus recursos, ésta debe usarlos. Mantener todos sus recursos en efectivo o instrumentos equivalentes con alta liquidez es una forma de protegerse contra la posible pérdida del valor, al menos del valor nominal del capital. La liquidez también representa una protección que permite responder rápidamente a oportunidades de negocio que requieran acción inmediata. Sin embargo, esta liquidez total implica que el dinero lo tengo disponible y por esa razón no está en otro lado trabajando para generar más riqueza, lo cual es especialmente problemático a largo plazo. En otras palabras, con el exceso de liquidez se pierden las potenciales ganancias de inversiones de más largo plazo y presumiblemente más rentables. Además, si bien el valor nominal se mantiene, la inflación puede reducir el valor real del capital. En muchos sistemas fiscales, los intereses generados por cuentas de ahorro se gravan como ingresos ordinarios, que a menudo tienen tasas más altas que las ganancias de capital a largo plazo. Por si fuera poco, en algunos países, mantener grandes cantidades de efectivo puede atraer el escrutinio de las autoridades fiscales o tener implicaciones para impuestos sobre el patrimonio. En contraste, estrategias de inversión a largo plazo pueden ofrecer ventajas fiscales significativas.</p>
<p>Si la empresa decide renunciar a mantener total liquidez y se decide por el criterio de rentabilidad, podría asignar sus recursos a proyectos de inversión más ambiciosos, posiblemente más diversificados, o dedicar recursos a investigación y desarrollo. Estos proyectos implican flujos de efectivo futuros a largo plazo que son complejos de gestionar y estimar. Al mismo tiempo, el relativamente alto valor esperado de estos flujos viene acompañado de riesgo de pérdidas, pérdidas que serían más fáciles de administrar con un nivel determinado de liquidez. Por lo tanto, mantener mucha liquidez garantiza que la empresa puede hacer frente a sus compromisos financieros inmediatos, pero normalmente esos activos líquidos, como el efectivo o cuentas por cobrar, no generan un rendimiento elevado. Por otro lado, invertir en activos menos líquidos, como maquinaria o proyectos a largo plazo, puede aumentar la rentabilidad, pero reduce la disponibilidad inmediata de fondos, lo que puede poner en riesgo la capacidad de responder ante emergencias o compromisos inesperados.</p>
<p>Una empresa debe lograr dos equilibrios clave para asegurar su estabilidad y crecimiento. Primero, en la mezcla óptima de deuda y capital, debe encontrar un punto donde maximice los beneficios del apalancamiento financiero sin asumir un riesgo excesivo. Por otro lado, en la decisión entre liquidez y rentabilidad, la empresa debe balancear su necesidad de mantener activos líquidos para garantizar operaciones fluidas y capacidad de respuesta ante imprevistos, mientras invierte en activos más rentables para impulsar su crecimiento a largo plazo. Lograr estos equilibrios implica una gestión estratégica que minimice riesgos, optimice los recursos y garantice la resiliencia ante cambios económicos.</p>
<p>This document took 0.36 seconds to compile in Quarto version 1.5.54, and R version 4.4.1 (2024-06-14 ucrt).</p>
</section>

</main>
<!-- /main column -->
<!-- Google tag (gtag.js) -->

<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FKZNRVQ9EE"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'G-FKZNRVQ9EE');

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="index_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>